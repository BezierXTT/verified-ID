<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<input type="text" placeholder="请输入省份证" maxlength="18" class="text" id="first">
		<input type="button" value="提交" class="button" onclick="jc('#first')">   <!--获取到DOM中id为first的文本框，此处为实参，实际对象-->
		
		
		
		<script>
			function jc(test){   //jc函数，此处为形参，可以是多个，使外界能获取到这个函数使用
				var region = [11,12,13,14,15,21,22,23,31,32,33,34,35,36,37,41,42,43,44,45,46,50,51,52,53,54,61,62,63,64,65,71,81,82,91];  //地区编号
				var string_w = [7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];  //加权质因子
				var last_n = ["1","0","X","9","8","7","6","5","4","3","2"]
				var first_string = document.querySelector(test).value.substring(0,17);  //除去最后一位校验符
				var first_value = document.querySelector(test).value;
				var first_number = parseInt(first_value,10);
				var first_four = document.querySelector(test).value.substring(0,2);   //定义一个局部变量，获得文本框中前六个的字符串    querySelector()匹配css选择器
				var first_seven = document.querySelector(test).value.substring(6,10);
				var first_eleven = document.querySelector(test).value.substring(10,12);
				var first_thirteen = document.querySelector(test).value.substring(12,14);
				var first_fourteen = document.querySelector(test).value.substring(14,18);
				var first_eighteen = document.querySelector(test).value.substring(17);
				var max_year = new Date();
				var min_year = 1897;
				var max_month = 12;
				var min_month = 1;
				var max_day = 31;
				var min_day = 1;
				var must_number = /[^\d{4}|X]/; 
				var first_answer = 0;
				var ai = 0;
				var wi = 0;
				//var must_number = /[0-9]/
//				region.forEach(function(e){
//					if(e == first_four){
//						alert("true");
//					}else{
//						alert("false");
//					}
//				});
				
//				for(i = 0;i < region.length;i++){
//					 region_l = region[i];
//					
//				}
				if(first_value.length != 18){  
					alert("错误,没有输入18位数字");  
				}else if(!region[first_four]){     
					alert("错误,不等于区域编号");
				}else if(first_seven < min_year){
					alert("错误,小于年");
				}else if(first_seven >= max_year.getFullYear()){
					alert("错误,大于年");
				}else if(first_eleven > max_month){
					alert("错误,大于月");
				}else if(first_eleven < min_month){
					alert("错误,小于月");
				}else if(first_thirteen > max_day){
					alert("错误,大于天");
				}else if(first_thirteen < min_day){
					alert("错误,小于天");
				}else if(first_fourteen.match(must_number)){
					alert("错误,最后正则不对");
				}else{
					
					for(i = 0;i <= 16;i++){
						ai = first_value[i];
						wi = string_w[i];
						first_answer += ai * wi;
					}
					if(last_n[first_answer%11] != first_value.substring(17)){
						alert("您输入的身份证不正确！");
					}else{
						alert("恭喜你通过验证！")
					}
					
//					var first_last = first_answer%11;
//					console.log(number_a[i])
				}
//					if(region[i] == first_four && first_seven <= max_year.getFullYear() && first_seven >= min_year && first_eleven <= max_month && first_eleven >= min_month && first_thirteen <= max_day && first_thirteen >= min_day && first_fourteen.match(must_number)){
//						for(i = 0;i < first_string.length;i++){
//							
//						}else{
//						console.log("请输入正确的身份证号！");
//					}
				}				
//				
//				alert(195%11)
		</script>

				
	</body>
</html>
